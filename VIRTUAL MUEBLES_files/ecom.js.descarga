"use strict";(function(){this.ajaxCartSuccess=function(e,t,o="add"){window.omegaCallBackAddToCart&&"function"==typeof window.omegaCallBackAddToCart&&window.omegaCallBackAddToCart(),window.fetch(this.routes.cart_url+"?section_id=ecom-ajax-cart"+(e&&e.key?"&key="+e.key:""),{method:"GET",headers:{"Content-Type":"text/html"}}).then(e=>e.text()).then(t=>{let r=document.querySelector(".ecom-cart-popup"),a=document.createElement("div");a.classList.add("ecom-cart-popup");let n=new DOMParser().parseFromString(t,"text/html").querySelector("#shopify-section-ecom-ajax-cart");if(!n)return window.location.href=this.routes.cart_url,!1;if(a.appendChild(n),document.body.appendChild(a),this.handleCartPopup(a),e&&e.key){let i=a.querySelector('.ecom-ajax-cart-line-item[data-key="'+e.key+'"]');if(i){let c=document.querySelector(".ecom-ajax-cart-body");if(c){let s=c.querySelector(".ecom-ajax-cart-line-item");if(s){let l=c.getBoundingClientRect().top-s.getBoundingClientRect().top;(c=i.closest(".ecom-ajax-cart-body")).scrollTop=l}}}}if(r&&r.remove(),"update"==o){var d=document.querySelector(".ecom-ajax-cart-status span");d&&(d.innerHTML=d.dataset.textUpdate)}this.onAjaxPopupLoaded()}).catch(e=>{console.log(e),alert(e.message)})},this.onAjaxPopupLoaded=()=>{var e=document.querySelector(".ecom-ajax-cart-checkout-button"),t=document.querySelector("#terms"),o=document.querySelector(".terms-error");e&&t&&o&&(e.removeAttribute("name"),e.addEventListener("click",function(e){!1==t.checked?(e.preventDefault(),o.classList.remove("terms-dn")):o.classList.add("terms-dn")}),t.addEventListener("change",function(){o.classList.add("terms-dn"),t.checked?e.setAttribute("name","checkout"):e.removeAttribute("name")}))},this.blinkElement=function(e){e.classList.add("ecom-line-item-blink"),setTimeout(()=>{e&&e.classList.remove("ecom-line-item-blink")},2e3)},this.recentProducts=function(){let e="-recent-proecomducts";if(window.location.pathname.indexOf("/products/")>=0){var t=window.location.pathname.split("/products/").pop().split("/")[0];try{var o=JSON.parse(window.localStorage.getItem(e));if("object"==typeof o){if(o.indexOf(t)>=0)return 0;o.reverse(),o.push(t),o.reverse(),window.localStorage.setItem(e,JSON.stringify(o))}else throw"Data invalid"}catch(r){window.localStorage.setItem(e,"[]")}}},this.handleCartPopup=function(e){var t=this;function o(e){"minus"===this.name?(this.nextElementSibling.stepDown(),this.nextElementSibling.dispatchEvent(new window.Event("change"))):"plus"===this.name&&(this.previousElementSibling.stepUp(),this.previousElementSibling.dispatchEvent(new window.Event("change")))}function r(){let e=this.value,o=this.dataset.key,r=this.closest(".ecom-ajax-cart-line-item");r&&r.classList.add("ecom-item-loading"),t.cartItemChange(o,parseInt(e)).then(e=>{let a=null;if(e.items&&(a=e.items.find(e=>e.key===o)),a)t.ajaxCartSuccess(a,null,"update");else{if(e.errors){t.showToast(e.errors,"error");let n=r.closest(".ecom-ajax-cart-body");if(n){let i=n.querySelector(".ecom-ajax-cart-line-item");if(i){let c=n.getBoundingClientRect().top-i.getBoundingClientRect().top;setTimeout(function(){(n=document.querySelector(".ecom-ajax-cart-body")).scrollTo({top:c,behavior:"smooth"})},450)}}}t.ajaxCartSuccess(null,null,"update")}r&&r.classList.remove("ecom-item-loading")}).catch(e=>{console.error(e),t.ajaxCartError(e)})}e.addEventListener("click",function(t){t.target===e?e.remove():t.target.closest('[data-ecom-action="close"]')&&e.remove()}),e.querySelectorAll(".ecom-ajax-cart-line-item-quantity-button").forEach(e=>{e.addEventListener("click",o)}),e.querySelectorAll(".ecom-ajax-cart-line-item-quantity-input").forEach(e=>{e.addEventListener("change",r)}),e.querySelector("#ecom-ajax-cart-note")&&e.querySelector("#ecom-ajax-cart-note").addEventListener("change",function(){let e=this.value;t.cartUpdate({note:e})}),e.querySelectorAll(".ecom-ajax-cart-line-item-button-remove").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),this.value=0,r.bind(this)(e)})})},this.ajaxCartError=function(e,t){alert("Error"+e.message)},this.beforeAjaxCartSend=function(e){},this.ajaxCart=function(){var e=this,t=t=>{if(!t.querySelector('[name="id"]'))return!!window.document.querySelector("#admin-bar-iframe")&&(alert('Please drag Variant picker element to this section to allow the "Add to cart" feature working. This message only show for owner\'s store'),!1);var o=t.querySelector(".ecom-product-single__add-to-cart--submit.ecom-clicked");o||(o=t.querySelector(".ecom-product-single__add-to-cart--submit")),o&&(o.style.cursor="not-allowed",o.style.pointerEvents="none",o.classList.add("ecom-ajax-loading","ecom-loading")),this.beforeAjaxCartSend(t);let r=new FormData(t);return r.append("sections","cart-notification-product,cart-notification-button,cart-icon-bubble,cart-drawer"),window.fetch(this.routes.cart_add_url,{method:"POST",headers:{Accept:"application/javascript","X-Requested-With":"XMLHttpRequest"},body:r}).then(e=>e.json()).then(r=>{if(r.errors)throw Error(r.errors);if(r.status>200){e.showToast(r.description,"error"),o&&(o.style.cursor="pointer",o.style.pointerEvents="auto",o.classList.remove("ecom-ajax-loading","ecom-loading"));return}let{action:a,href:n,textAddedCart:i,target:c,messageAddedCart:s}=o.dataset;o&&(o.style.cursor="pointer",o.style.pointerEvents="auto",o.classList.remove("ecom-ajax-loading","ecom-loading"),o.querySelector(".ecom-add-to-cart-text")&&i&&""!=i&&(o.querySelector(".ecom-add-to-cart-text").innerHTML=i)),document.dispatchEvent(new CustomEvent("ec-cart-added",{detail:r}));let l=this.routes;switch(a){case"cart":return setTimeout(function(){window.location.href=l.cart_url},500);case"reload":return setTimeout(function(){return window.location.reload()},500);case"checkout":return setTimeout(function(){return window.location.href=l.root_url+("/"===l.root_url?"":"/")+"checkout"},500);case"message":this.showToast(s);break;case"link":n&&setTimeout(function(){return"_blank"===c?window.open(n):window.location.href=n},500);default:this.ajaxCartSuccess(r,t)}}).catch(e=>{o&&(o.style.cursor="pointer",o.style.pointerEvents="auto",o.classList.remove("ecom-ajax-loading","ecom-loading")),this.ajaxCartError(e,t)}),!1};let o=document.querySelectorAll(".ecom-product-single__add-to-cart--submit");o.length&&o.forEach(function(e){e.addEventListener("click",function(r){r.preventDefault(),o.forEach(function(e){e.classList.remove("ecom-clicked")}),e.classList.add("ecom-clicked");let a=this.closest("form.ecom-product-form");a.addEventListener("submit",function(e){e.preventDefault()}),t.bind(document.body)(a)})}),this.handleATCList();let r=document.querySelectorAll(".ecom-ajax-cart-simple[data-id]");var e=this;r.forEach(function(t){t.addEventListener("click",function(t){e.handleClickEvent(this,t)})})},this.handleClickEvent=function(e,t,o=!1){t.preventDefault();let r=e.closest(".ecom-collection__product-form__actions"),a=1,n=null;r&&(n=r.querySelector(".ecom-collection__product-quantity-input")),n&&(a=n.value);let i=e,c=this;i&&(i.style.cursor="pointer",i.style.pointerEvents="auto",i.classList.add("ecom-ajax-loading")),c.beforeAjaxCartSend(t.target),window.fetch(c.routes.cart_add_url,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/javascript","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({id:i.dataset.id,quantity:a,sections:"cart-notification-product,cart-notification-button,cart-icon-bubble,cart-drawer"})}).then(e=>e.json()).then(e=>{if(e.errors)throw Error(e.errors);if(e.status>200){c.showToast(e.description,"error"),i&&(i.style.cursor="pointer",i.style.pointerEvents="auto",i.classList.remove("ecom-ajax-loading","ecom-loading"));return}let{action:r,href:a,textAddedCart:n,target:s,messageAddedCart:l}=i.dataset;if(i&&(i.style.cursor="pointer",i.style.pointerEvents="auto",i.classList.remove("ecom-ajax-loading","ecom-loading"),n&&""!=n&&(i.querySelector(".ecom-add-to-cart-text").innerHTML=n)),c.onAjaxCartSuccess&&c.onAjaxCartSuccess(e,t.target),o&&!c.configs.ajax_cart.enable)return setTimeout(function(){return window.location.href=c.routes.cart_url},500);switch(document.dispatchEvent(new CustomEvent("ec-cart-added",{detail:e})),r){case"cart":return setTimeout(function(){return window.location.href=c.routes.cart_url},500);case"reload":return setTimeout(function(){return window.location.reload()},500);case"checkout":return setTimeout(function(){return window.location.href=c.routes.root_url+"checkout"},500);case"message":c.showToast(l);break;case"link":if(a)return setTimeout(function(){return"_blank"===s?window.open(a):window.location.href=a},500);default:c.ajaxCartSuccess(e,t.target)}}).catch(e=>{window.alert(e.message),console.error(e),i&&(i.style.cursor="pointer",i.style.pointerEvents="auto",i.classList.remove("ecom-ajax-loading","ecom-loading")),c.ajaxCartError(e,t.target)})},this.cartItemChange=function(e,t,o=null){return window.fetch(this.routes.cart_change_url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:e,quantity:t,line:o})}).then(e=>e.json())},this.handleATCList=function(){let e=document.querySelectorAll(".ecom-collection__product-item .ecom-product-form");var t=this;e.forEach(function(e){let o=e.querySelector(".ecom-ajax-cart-submit"),r=e.querySelector('[name="variant_id"]');o&&r&&o.addEventListener("click",function(e){e.preventDefault(),this.dataset.id=r.value,t.handleClickEvent(this,e,!0)}),e.classList.add("ecom-ajax-cart")})},this.cartUpdate=function(e,t){return window.fetch(this.routes.cart_update_url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json())},this.showToast=function(e,t){let o=document.querySelector("#ecom-toast-desc"),r=document.querySelector("#ecom-toast"),a=document.querySelector("#ecom-toast-icon");"error"===t?(r.style.cssText="background-color: red;overflow: hidden; z-index: 10000000;",a.style.cssText="background-color: red;"):(r.style.cssText="background-color: #333;overflow: hidden; z-index: 10000000;",a.style.cssText="background-color: #333; border-radius: 2px;"),r&&o&&a&&(o.innerHTML=e,r.classList.add("ecom-toast-show"),r.style.setProperty("--ecom-max-width",o.clientWidth+50+"px"),setTimeout(()=>{r.classList.remove("ecom-toast-show")},5e3))},this.initToastTemplate=function(){let e=document.querySelector("#ecom-template-html");if(e){let t=document.createElement("div");t.innerHTML=e.innerHTML,document.body.appendChild(t)}},this.isAdmin=function(){return document.querySelector("#admin-bar-iframe")||window.Shopify.designMode},this.init=function(){if(this.initToastTemplate(),window.Shopify&&!this.isAdmin()){let e=window.EComposer.PAGE||window.EComposer.TEMPLATE||window.EComposer.SECTION||window.EComposer.BLOCK||{};if(e){if(e.type&&(e.layout_type=e.type,delete e.type),e.template_id&&(e.layout_id=e.template_id,delete e.template_id),window.Shopify.analytics)Shopify.analytics.publish("ec_page_viewed",e);else{var t=0;let o=setInterval(function(){window.Shopify.analytics&&(Shopify.analytics.publish("ec_page_viewed",e),clearInterval(o)),++t>200&&clearInterval(o)},100)}var r=new Date().getTime(),a=!1;document.addEventListener("click",function(e){a=!0},{once:!0}),window.addEventListener("beforeunload",function(t){if(!a){var o=new Date().getTime();window.Shopify.analytics&&Shopify.analytics.publish("ec_bounce_rate",{...e,elapsed_time:((o-r)/1e3).toFixed(2)})}})}}this.configs&&this.configs.ajax_cart&&this.configs.ajax_cart.enable?this.ajaxCart():(this.handleATCList(),document.body.addEventListener("submit",function(e){e.target.classList.contains("ecom-product-form")&&"FORM"===e.target.nodeName&&window.omegaCallBackAddToCart&&"function"==typeof window.omegaCallBackAddToCart&&window.omegaCallBackAddToCart()}))},this.init()}).bind(window.EComposer||{})(),function(){var e;function t(){document.querySelectorAll(".ecom-sections .ecom-video-background").forEach(function(e){"true"===e.dataset.playPauseInview&&(function e(t){let{top:o,bottom:r}=t.getBoundingClientRect(),a=window.innerHeight||document.documentElement.clientHeight;return(o>0||r>0)&&o<a}(e)?e.play():e.pause())})}function o(){document.body.hasAttribute("ecom-loaded")||(clearTimeout(window.stretchedTimmer),window.stretchedTimmer=setTimeout(()=>{let e=document.querySelectorAll(".ecom-core.ecom-section"),t=document.querySelectorAll(".ecom-swiper-container"),o=document.querySelectorAll(".ecom-sections"),r=window.innerWidth;if(e.length>0){o.forEach(e=>{e.style.width=""});let a=(r-o[0].offsetWidth)/2;e.forEach(e=>{e.classList.contains("ecom-section__stretched")?(e.style.width=r+"px",e.style.marginLeft=-a+"px"):(e.style.width="",e.style.marginLeft="")})}t.length>0&&t.forEach(e=>{e.EComSwiper&&e.EComSwiper.update()})},50))}window.addEventListener("scroll",function(){clearTimeout(e),e=setTimeout(t,500)}),o(),window.addEventListener("resize",o),window.addEventListener("load",o),document.addEventListener("DOMContentLoaded",function(){"function"==typeof window.EComposer.initQuickview&&window.EComposer.initQuickview()}),!function e(t,o={}){let r=document.querySelectorAll(t);(r=Array.from(r)).forEach(e=>{(function e(t,o){new IntersectionObserver((e,r)=>{e.forEach(e=>{e.isIntersecting&&(o.cb?o.cb(t):(e.target.classList.add("ecom-animated"),e.target.classList.add("animated")),r.unobserve(e.target))})},o).observe(t)})(e,o)})}(".ecom-animation");let r=function(){let e=this;this.defaultValue=[],this.init=function(){let t=document.querySelectorAll("[ecom-scrolling-animation]");t.length&&window.addEventListener("scroll",()=>{e.handleScrollAnimation(t)})},this.handleScrollAnimation=function(t){t.forEach(function(t,o){e.animation(t,o)})},this.animation=function(e,t){let o=e.getAttribute("ecom-scrolling-animation")?JSON.parse(e.getAttribute("ecom-scrolling-animation")):null;if(!o)return;let r=this.getViewPercentage(e),a=this.getOptions(o,r,e,t);if(r>0&&r<100){var n="",i="",c="";if(Object.keys(a).forEach(function(e){["translateX","translateY"].includes(e)?(n+=`${e}(${a[e]})`,delete a[e]):["blur"].includes(e)?(c+=`${e}(${a[e]})`,delete a[e]):["rotate"].includes(e)&&(i=`${e}(${a[e]})`,delete a[e])}),Object.keys(a).length&&Object.assign(e.style,a),n&&(e.style.transform=n,e.ecomCSSTransform||(e.ecomCSSTransform=!0)),c&&(e.style.filter=c,e.ecomCSSFilter||(e.ecomCSSFilter=!0)),i){let s=e.querySelector(":first-child");s&&(s.style.transform=i),e.ecomCSSRotate||(e.ecomCSSRotate=!0)}}else if(e.ecomCSSTransform&&(e.style.transform="",n="",e.ecomCSSTransform=!1),e.ecomCSSFilter&&(e.style.filter="",c="",e.ecomCSSFilter=!1),e.ecomCSSRotate){let l=e.firstElementChild;l&&(l.style.transform="",i=""),e.ecomCSSRotate=!1}},this.getStyleValue=function(e,t){if(!t)return"";let o=RegExp(`${e}\\(([\\d\\-.a-z]+)\\)`),r=t.match(o);return r[1]||""},this.getOptions=function(t,o,r,a){var n={};return t.forEach(function(t){var i,c;let s=t.value;if(s){if(e.defaultValue[a]){if(void 0===e.defaultValue[a][t.css]){let l=r.style[t.css];["translateX","translateY"].includes(t.css)&&(l=e.getStyleValue(t.css,r.style.transform)||0),["blur"].includes(t.css)&&(l=e.getStyleValue(t.css,r.style.filter)||0),e.defaultValue[a][t.css]=l}}else e.defaultValue[a]={},e.defaultValue[a][t.css]=r.style[t.css];if(0<o&&o<100){if(s.trigger_start||s.trigger_end){let d=s.trigger_start?s.trigger_start:0,u=s.trigger_end?s.trigger_end:100;if(d>u){let m=d;d=u,u=m}if(d>o)c=0;else if(u<o)c=100;else{let h=u-d;c=(o-d)/h*100}i=e.caculateCss(c,s)}else i=e.caculateCss(o,s)}else i=e.defaultValue[a][t.css];n[t.css]=i}}),n},this.caculateCss=function(e,t){let o="";if(t.hasOwnProperty("start")&&t.hasOwnProperty("end")){if(t.hasOwnProperty("middle")){var r=this.toInt(t.start),a=this.toInt(t.middle),n=this.toInt(t.end);e<=50?(o=(r-a)*(e/100/.5),o=r-o):(o=(a-n)*(1-e/100/.5),o=a+o)}else o=(this.toInt(t.start)-this.toInt(t.end))*(e/100),o=this.toInt(t.start)-o;return o+this.getUnit(t.start)}if(t.middle&&50===e)return this.toInt(t.middle)+this.getUnit(t.middle)},this.toInt=function(e){return"number"==typeof e?e:parseInt(e.replace("px",""))},this.getUnit=function(e){return"number"==typeof e?"":e.replace(/-?([\d]+)/,"")},this.getViewPercentage=function(e){let t=e.getBoundingClientRect(),o=window.innerHeight,r=window.scrollY,a=t.y+window.pageYOffset,n=t.height;return(r+o-a)/((o+n)/100)},this.init()};r.bind({}).call();let a=document.querySelectorAll(".ecom-use-parallax .ecom-parallax-background img");function n(){a.forEach(function(e){!function e(t){if(!t)return;let o=t.closest(".ecom-use-parallax"),r=o.offsetTop,a=window.scrollY,n=window.innerHeight,i=o.clientHeight,c=a+n;if(c>r&&a<r+i){let s=-((c-r)*1)/(n+i)*100+100;t.style.top=s+"%",t.style.transform=`translate(-50%, -${s}%)`}}(e)})}document.addEventListener("scroll",n),window.addEventListener("load",n),document.addEventListener("shopify:section:load",e=>{let t=JSON.parse(unescape(e.target.dataset.shopifyEditorSection)),o=null;if(t.type&&t.type.includes("ecom-")&&(o=e.target),!o)return;let r=o.querySelectorAll("script");r.length&&r.forEach(function(e){if(e.src){o.removeChild(e);let t=document.createElement("script");t.src=e.src,o.prepend(t)}})})}();